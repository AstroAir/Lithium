import{initLogging as mainInitLogging}from"./util/logging.min.js";export function initLogging(level){"use strict";if(void 0!==level)mainInitLogging(level);else{const param=document.location.href.match(/logging=([A-Za-z0-9._-]*)/);mainInitLogging(param||void 0)}}export function getQueryVar(name,defVal){"use strict";const re=new RegExp(".*[?&]"+name+"=([^&#]*)"),match="".concat(document.location.href,window.location.hash).match(re);return void 0===defVal&&(defVal=null),match?decodeURIComponent(match[1]):defVal}export function getHashVar(name,defVal){"use strict";const re=new RegExp(".*[&#]"+name+"=([^&]*)"),match=document.location.hash.match(re);return void 0===defVal&&(defVal=null),match?decodeURIComponent(match[1]):defVal}export function getConfigVar(name,defVal){"use strict";const val=getHashVar(name);return null===val?getQueryVar(name,defVal):val}export function createCookie(name,value,days){"use strict";let date,expires,secure;days?(date=new Date,date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()):expires="",secure="https:"===document.location.protocol?"; secure":"",document.cookie=name+"="+value+expires+"; path=/"+secure}export function readCookie(name,defaultValue){"use strict";const nameEQ=name+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i+=1){let c=ca[i];for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return void 0!==defaultValue?defaultValue:null}export function eraseCookie(name){"use strict";createCookie(name,"",-1)}let settings={};export function initSettings(){return window.chrome&&window.chrome.storage?new Promise(resolve=>window.chrome.storage.sync.get(resolve)).then(cfg=>{settings=cfg}):(settings={},Promise.resolve())}export function setSetting(name,value){settings[name]=value}export function writeSetting(name,value){"use strict";settings[name]!==value&&(settings[name]=value,window.chrome&&window.chrome.storage?window.chrome.storage.sync.set(settings):localStorage.setItem(name,value))}export function readSetting(name,defaultValue){"use strict";let value;return name in settings||window.chrome&&window.chrome.storage?value=settings[name]:(value=localStorage.getItem(name),settings[name]=value),void 0===value&&(value=null),null===value&&void 0!==defaultValue?defaultValue:value}export function eraseSetting(name){"use strict";delete settings[name],window.chrome&&window.chrome.storage?window.chrome.storage.sync.remove(name):localStorage.removeItem(name)}